{% extends "base.jinja" %}

{% block title %}
{{mountain.name}} - Map
{% endblock title %}

{% block head %}
<link href="/map.css" rel="stylesheet" />
{% endblock head %}

{% block body %}
<div id="map"></div>

<main>
    <div class="map-pane mountain-details">
        <div class="mountain-title">
            <h1>{{mountain.name}}</h1>
            <span class="mountain-location">{{mountain.state}}</span>
        </div>
        <div class="mountain-section">
            <h2>Overview</h2>
            <ul>
                {% for (key, value) in mountain.statistics.items() %}
                <li>{{key}}: {{value}}</li>
                {% endfor %}
            </ul>
        </div>
        <div class="mountain-section">
            <h2>Trails - Sorted by Difficulty</h2>
            <ul>
                {% for trail in mountain.trails %}
                {% if not '' == trail.name %}
                <li>
                    {% if trail.difficulty < 17 %} <span class="icon difficulty-green"></span>
                        {% else %}
                        {% if trail.difficulty < 24.2 %} <span class="icon difficulty-blue"></span>
                            {% else %}
                            {% if trail.difficulty < 30 %} <span class="icon difficulty-black"></span>
                                {% else %}
                                {% if trail.difficulty < 45 %} <span class="icon difficulty-red"></span>
                                    {% else %}
                                    <span class="icon difficulty-yellow"></span>
                                    {% endif %}
                                    {% endif %}
                                    {% endif %}
                                    {% endif %}
                                    {{trail.steepest_pitch}}° - {{trail.name}}
                </li>
                {% endif %}
                {% endfor %}
            </ul>
        </div>
        <div class="mountain-section">
            <h2>Lifts</h2>
            <ul>
                {% for lift in mountain.lifts %}
                {% if not '' == lift.name %}
                <li>{{lift.name}}</li>
                {% endif %}
                {% endfor %}
            </ul>
        </div>
    </div>

    <a href="javascript:history.back()" class="back-button">
        ← Back to Mountain List</span>
    </a>

    <div class="map-pane map-selector">
        <button id="select-map-2d" class="map-selector-icon active">
            <svg width="100%" height="100%" viewBox="0 0 499.99996 499.99999" xmlns="http://www.w3.org/2000/svg">
                <path transform="scale(.26458)"
                    d="m1094.7 151.18v75.59h417.16c84.408 0 151.18 66.774 151.18 151.18v1133.9c0 84.408-66.774 151.18-151.18 151.18h-1133.9c-84.408 0-151.18-66.774-151.18-151.18v-843.56h-75.59v843.56c0 124.98 101.79 226.77 226.77 226.77h1133.9c124.98 0 226.77-101.79 226.77-226.77v-1133.9c0-124.98-101.79-226.77-226.77-226.77h-417.16z"
                    color="#000000" stroke-width="3.7795" />
                <path d="m191.94 194.14-18.334 7.9902 92.1 211.3 18.334-7.9902z" color="#000000" />
                <path
                    d="m146.77 212.51c-18.325 25.853-38.879 52.993-36.436 83.729 2.4437 30.735 26.759 56.227 43.361 78.473 16.602 22.245 27.993 42.311 39.654 62.871l17.396-9.8672c-11.661-20.56-23.592-41.613-41.021-64.967-17.429-23.354-37.852-47.938-39.455-68.096-1.6026-20.157 14.492-44.723 32.816-70.576z"
                    color="#000000" />
                <path
                    d="m238.01 221.88-7.6816 18.467c17.373 7.2267 34.471 14.379 47.928 21.961 13.457 7.5817 22.777 15.705 26.102 22.814 3.3245 7.1097 2.6665 16.661-0.11133 28.506s-7.4855 25.205-9.0938 39.307c-3.2165 28.204 7.3715 52.824 16.891 75.623l18.455-7.7051c-9.5191-22.799-17.969-43.778-15.475-65.652 1.2473-10.937 5.5813-23.736 8.6934-37.006 3.112-13.27 5.1902-27.789-1.2422-41.545-6.4324-13.756-19.361-23.293-34.402-31.768s-32.69-15.775-50.062-23.002z"
                    color="#000000" />
                <path
                    d="m229.31 173.48-0.26562 19.998c22.965 0.30535 45.767 0.622 64.859 2.2539 19.092 1.6319 34.615 5.0983 41.395 9.1543 6.7796 4.056 8.0827 8.1425 8.9863 17.252s-0.0603 21.948 1.6856 36.715c3.4916 29.533 17.187 61.318 21.863 87.412 4.6758 26.094 1.3802 48.675-2.1894 72.695l19.783 2.9395c3.5697-24.021 7.4129-49.478 2.0938-79.162-5.3192-29.684-18.753-61.413-21.688-86.232-1.4671-12.41-0.46771-24.457-1.6465-36.34-1.1788-11.883-6.0036-24.896-18.619-32.443-12.616-7.5476-29.756-10.189-49.961-11.916-20.205-1.727-43.332-2.0208-66.297-2.3262z"
                    color="#000000" />
                <path
                    d="m163.49 256.61c-0.23798 14.657-0.36417 31.346 7.9316 58.459 8.2958 27.113 24.538 64.552 40.721 102.01l18.359-7.9316c-16.183-37.456-32.306-74.927-39.955-99.928-7.6493-25-7.2985-37.626-7.0605-52.283z"
                    color="#000000" />
                <g stroke-width=".26458px" aria-label="2D">
                    <path
                        d="m61.863 131.54h56.586v24.374h-93.448v-24.374l46.939-41.427q6.2873-5.6844 9.3018-11.11 3.0145-5.426 3.0145-11.283 0-9.0434-6.115-14.556-6.0289-5.5122-16.106-5.5122-7.7515 0-16.967 3.359-9.2156 3.2728-19.723 9.8185v-28.25q11.197-3.7035 22.135-5.5983 10.938-1.9809 21.446-1.9809 23.082 0 35.829 10.163 12.833 10.163 12.833 28.336 0 10.508-5.426 19.637-5.426 9.0434-22.824 24.288z" />
                    <path
                        d="m183.13 52.389v78.462h11.886q20.326 0 31.006-10.077 10.766-10.077 10.766-29.283 0-19.12-10.68-29.111-10.68-9.9908-31.092-9.9908zm-33.159-25.063h34.968q29.283 0 43.58 4.2202 14.383 4.1341 24.632 14.125 9.0434 8.6989 13.436 20.068 4.3925 11.369 4.3925 25.752 0 14.556-4.3925 26.01-4.3925 11.369-13.436 20.068-10.335 9.9908-24.805 14.211-14.469 4.1341-43.408 4.1341h-34.968z" />
                </g>
            </svg>
        </button>
        <button id="select-map-3d" class="map-selector-icon">
            <svg width="100%" height="100%" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                <g stroke-width=".26458px">
                    <path
                        d="m95.366 86.581q13.005 3.359 19.723 11.713 6.8041 8.2682 6.8041 21.101 0 19.12-14.642 29.111-14.642 9.9047-42.719 9.9047-9.9047 0-19.895-1.6364-9.9047-1.5503-19.637-4.737v-25.58q9.3018 4.6509 18.431 7.0624 9.2156 2.3254 18.087 2.3254 13.177 0 20.154-4.5648 7.0625-4.5648 7.0625-13.091 0-8.785-7.2347-13.264-7.1486-4.5648-21.187-4.5648h-13.264v-21.36h13.953q12.488 0 18.604-3.8757 6.115-3.9619 6.115-11.972 0-7.407-5.9428-11.455-5.9428-4.048-16.795-4.048-8.0099 0-16.192 1.8087-8.1821 1.8087-16.278 5.3399v-24.288q9.8185-2.7561 19.465-4.1341 9.6463-1.378 18.948-1.378 25.063 0 37.465 8.2682 12.488 8.1821 12.488 24.719 0 11.283-5.9428 18.517-5.9428 7.1486-17.57 10.077z" />
                    <path
                        d="m185.28 52.389v78.462h11.886q20.326 0 31.006-10.077 10.766-10.077 10.766-29.283 0-19.12-10.68-29.111-10.68-9.9908-31.092-9.9908zm-33.159-25.063h34.968q29.283 0 43.58 4.2202 14.383 4.1341 24.632 14.125 9.0434 8.6989 13.436 20.068 4.3925 11.369 4.3925 25.752 0 14.556-4.3925 26.01-4.3925 11.369-13.436 20.068-10.335 9.9908-24.805 14.211-14.469 4.1341-43.408 4.1341h-34.968z" />
                </g>
                <path d="m197.76 429.08 81.389-209.19" fill="none" stroke-width="19.092" />
                <path
                    d="m339.27 169.93-93.57 55.395-58.365 9.4844-86.061 83.834-54.947 94.713 17.299 10.037 53.57-92.34 79.574-77.516 55.867-9.0781 84.916-50.27 67.744 54.324 47.693 174.64 19.293-5.2695-49.404-180.91z"
                    color="#000000" />
                <path d="m322.77 237.23-22.846 184.2 19.848 2.4609 22.846-184.2z" color="#000000" />
                <path
                    d="m295.12 246.65c-29.271 7.8533-60.777 16.212-88.672 41.932-27.894 25.719-50.474 66.326-73.082 106.31l17.41 9.8457c22.608-39.981 45.244-79.333 69.23-101.45 23.986-22.116 51.024-29.465 80.295-37.318z"
                    color="#000000" />
                <path
                    d="m279.06 287.24c-14.993 15.707-31.763 32.712-37.043 56.889-5.2796 24.176 1.4549 50.794 7.4043 76.496l19.486-4.5098c-5.9494-25.702-11.115-50.486-7.3516-67.719 3.7634-17.233 16.98-31.641 31.973-47.348z"
                    color="#000000" />
                <path
                    d="m363.09 261.24-12.229 15.824c7.8535 6.0686 15.289 11.919 20.223 17.418 4.9336 5.4985 7.0508 9.9597 6.9492 14.424-0.10156 4.4643-3.3914 12.501-7.8379 21.766-4.4465 9.2648-9.7827 19.874-11.25 32.127-2.9345 24.506 10.521 46.477 22.182 66.943l17.379-9.9004c-11.661-20.466-21.528-39.426-19.703-54.664 0.91232-7.6187 4.9759-16.584 9.4238-25.852 4.4479-9.2679 9.547-18.722 9.8027-29.965 0.25575-11.243-5.3014-20.705-12.059-28.236-6.7572-7.531-15.027-13.816-22.881-19.885z"
                    color="#000000" />
                <path
                    d="m143.87 162.88-80.896 48.76-50.77 104.64 17.994 8.7305 48.18-99.309 66.516-40.09 70.07 34.062 82.697-3.2891-0.79492-19.984-77.676 3.0898z"
                    color="#000000" />
                <path
                    d="m136.87 210.41-19.295 5.2617c1.5145 5.5533 2.6777 10.374 2.6777 13.799-1e-5 3.4245-0.44186 5.2288-3.1953 8.0332-2.7536 2.8045-9.8076 7.0399-17.689 11.402-7.8819 4.3624-16.628 9.0362-23.762 15.75-14.267 13.428-16.2 31.006-17.883 45.141l19.859 2.3652c1.6827-14.135 3.113-24.829 11.732-32.941 4.3097-4.0562 11.886-8.4686 19.738-12.814 7.8519-4.3459 15.942-8.4399 22.275-14.891 6.3337-6.4508 8.9238-14.826 8.9238-22.045 1e-5 -7.2191-1.8683-13.507-3.3828-19.061z"
                    color="#000000" />
            </svg>
        </button>
    </div>

    {#
    TODO: when trail selection is implemented, add selected pane, selected tool
    tip, and hover tooltip
    #}
</main>
{% endblock body %}

{% block postbody %}
<script>
    window.mountainName = '{{mountain.mountain_id}}';
</script>
<script src="/map.js"></script>
{% endblock postbody %}